[gd_scene load_steps=20 format=3 uid="uid://d0fw0qucdk77m"]

[ext_resource type="Script" path="res://addons/pronto/behaviors/Background.gd" id="1_wdilg"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Placeholder.gd" id="2_6eybi"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Instance.gd" id="2_bwuoa"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Move.gd" id="3_eaw55"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Key.gd" id="5_4dq8j"]
[ext_resource type="PackedScene" uid="uid://b0hh2suib87v3" path="res://.scene-instances/examples_pong__Instance.tscn" id="5_gskb4"]
[ext_resource type="Script" path="res://addons/pronto/helpers/Connection.gd" id="5_kl4mf"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Collision.gd" id="8_o7kee"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Always.gd" id="8_rccw5"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/State.gd" id="9_nvvjn"]
[ext_resource type="PackedScene" uid="uid://baom0bqbudtp6" path="res://.scene-instances/examples_pong__Instance2.tscn" id="11_1xd55"]

[sub_resource type="Resource" id="Resource_8ewsv"]
script = ExtResource("5_kl4mf")
signal_name = "collided"
to = NodePath("")
invoke = ""
arguments = []
only_if = "true"
expression = "var state = from.get_node(\"../../ball/State\")
var dir = state.get_meta(\"dir\")
dir.x *= -1
state.set_meta(\"dir\", dir)"

[sub_resource type="Resource" id="Resource_tvw6b"]
script = ExtResource("5_kl4mf")
signal_name = "pressed"
to = NodePath("../Move")
invoke = "move_up"
arguments = []
only_if = "true"
expression = ""

[sub_resource type="Resource" id="Resource_gkw8x"]
script = ExtResource("5_kl4mf")
signal_name = "pressed"
to = NodePath("../Move")
invoke = "move_down"
arguments = []
only_if = "true"
expression = ""

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ma70r"]
size = Vector2(20, 146)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bw6pk"]
size = Vector2(40, 40)

[sub_resource type="Resource" id="Resource_f6cfy"]
script = ExtResource("5_kl4mf")
signal_name = "always"
to = NodePath("../Move")
invoke = "move_direction"
arguments = ["from.get_node(\"../State\").get_meta(\"dir\")"]
only_if = "true"
expression = ""

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6wxci"]
size = Vector2(1171, 73)

[sub_resource type="Resource" id="Resource_2g1j7"]
script = ExtResource("5_kl4mf")
signal_name = "collided"
to = NodePath("")
invoke = ""
arguments = []
only_if = "true"
expression = "var state = from.get_node(\"../../ball/State\")
var dir = state.get_meta(\"dir\")
dir.y *= -1
state.set_meta(\"dir\", dir)"

[node name="pong" type="Node2D"]

[node name="right" parent="." instance=ExtResource("5_gskb4")]
position = Vector2(970, 307)

[node name="left" parent="." instance=ExtResource("5_gskb4")]
position = Vector2(33, 304)

[node name="up" parent="left/Placeholder" index="1"]
key = "W"

[node name="down" parent="left/Placeholder" index="2"]
key = "S"

[node name="Instance" type="Node2D" parent="."]
position = Vector2(-296, 142)
script = ExtResource("2_bwuoa")

[node name="Area2D" type="Area2D" parent="Instance"]

[node name="Collision" type="Node2D" parent="Instance/Area2D"]
position = Vector2(36, -47)
script = ExtResource("8_o7kee")
metadata/pronto_connections = [SubResource("Resource_8ewsv")]

[node name="Placeholder" type="Node2D" parent="Instance/Area2D"]
position = Vector2(65, 41)
script = ExtResource("2_6eybi")
placeholder_size = Vector2(40, 120)

[node name="Move" type="Node2D" parent="Instance/Area2D/Placeholder"]
position = Vector2(-50, 18)
script = ExtResource("3_eaw55")

[node name="up" type="Node2D" parent="Instance/Area2D/Placeholder"]
position = Vector2(-93, -25)
script = ExtResource("5_4dq8j")
key = "Up"
metadata/pronto_connections = [SubResource("Resource_tvw6b")]

[node name="down" type="Node2D" parent="Instance/Area2D/Placeholder"]
position = Vector2(-50, -33)
script = ExtResource("5_4dq8j")
key = "Down"
metadata/pronto_connections = [SubResource("Resource_gkw8x")]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Instance/Area2D"]
position = Vector2(66, 42)
shape = SubResource("RectangleShape2D_ma70r")

[node name="Background" type="Node2D" parent="."]
script = ExtResource("1_wdilg")
color = Color(0, 0, 0, 1)

[node name="ball" type="Area2D" parent="."]
position = Vector2(253, 111)

[node name="Placeholder" type="Node2D" parent="ball"]
script = ExtResource("2_6eybi")
placeholder_size = Vector2(40, 40)

[node name="CollisionShape2D" type="CollisionShape2D" parent="ball"]
shape = SubResource("RectangleShape2D_bw6pk")

[node name="State" type="Node2D" parent="ball"]
position = Vector2(33, 43)
script = ExtResource("9_nvvjn")
metadata/dir = Vector2(1, -1)

[node name="Always" type="Node2D" parent="ball"]
position = Vector2(-72, 15)
script = ExtResource("8_rccw5")
metadata/pronto_connections = [SubResource("Resource_f6cfy")]

[node name="Move" type="Node2D" parent="ball"]
position = Vector2(-59, -40)
script = ExtResource("3_eaw55")

[node name="Instance2" type="Node2D" parent="."]
position = Vector2(118, -366)
script = ExtResource("2_bwuoa")

[node name="wall" type="Area2D" parent="Instance2"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Instance2/wall"]
position = Vector2(571, -37)
scale = Vector2(1.36, 1)
shape = SubResource("RectangleShape2D_6wxci")

[node name="Collision" type="Node2D" parent="Instance2/wall"]
position = Vector2(-49, 32)
script = ExtResource("8_o7kee")
metadata/pronto_connections = [SubResource("Resource_2g1j7")]

[node name="floor" parent="." instance=ExtResource("11_1xd55")]
position = Vector2(105, 721)

[node name="ceil" parent="." instance=ExtResource("11_1xd55")]
position = Vector2(95, 1)

[editable path="left"]
